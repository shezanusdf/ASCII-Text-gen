import streamlit as st

# ----------------------------
# Templates
# ----------------------------
BITMAP_TEMPLATES = {
    "world": '''....................................................................
   **************   *  *** **  *      ******************************
  ********************* ** ** *  * ****************************** *
 **      *****************       ******************************
          *************          **  * **** ** ************** *
           *********            *******   **************** * *
            ********           ***************************  *
   *        * **** ***         *************** ******  ** *
               ****  *         ***************   *** ***  *
                 ******         *************    **   **  *
                 ********        *************    *  ** ***
                   ********         ********          * *** ****
                   *********         ******  *        **** ** * **
                   *********         ****** * *           *** *   *
                     ******          ***** **             *****   *
                     *****            **** *            ********
                    *****             ****              *********
                    ****              **                 *******   *
                    ***                                       *    *
                    **     *                    *
....................................................................''',

    "Smiley": '''
................................................................................
                     *******************************                            
                  *************************************                         
               ***********                     ***********                      
            *********                               *********                   
          *******                                       *******                 
        *****                                             *****                
       ****             ******              ******          ****               
      ***             **********          **********         ***              
     ***             ************        ************         ***             
    ***             **************      **************        ***             
   ***              **************      **************         ***            
   **               **************      **************          **            
  ***               **************      **************          ***           
  **                  **********          **********             **           
  **                    ******              ******               **           
  **                                                              **           
  **           ***************************************           **           
  ***        ***************************************             ***          
   ***     ***************************************              ***           
    ***                                                         ***           
     ***        ****                         ****              ***            
      ***        ****                       ****              ***             
       ****        ****                   ****              ****              
        *****        ***********************              *****               
          *******                                       *******                
            *********                               *********                  
               ***********                     ***********                     
                  *************************************                        
                     *******************************                            
................................................................................
''',

"Heart": '''
         ******       ******
       **********   **********
      ************ ************
     **************************
     **************************
      ************************
       **********************
        ********************
         ******************
          ****************
           **************
            ************
             **********
              ********
               ******
                ****
                 **
'''
}

# ----------------------------
# Function to render message in bitmap
# ----------------------------
def render_bitmap(bitmap: str, message: str) -> str:
    output = ""
    bitnum = 0
    for line in bitmap.splitlines():
        for bit in line:
            if bit == " ":
                output += " "
            else:
                bitnum += 1
                if bitnum % len(message) == 0:
                    bitnum = 0
                output += message[bitnum - 1]
        output += "\n"
    return output

# ----------------------------
# STREAMLIT UI
# ----------------------------
st.title("ASCII text generator")

message = st.text_input("Enter your message:")

template_name = st.selectbox("Select a bitmap template:", list(BITMAP_TEMPLATES.keys()))

if st.button("Generate"):
    if not message:
        st.warning("Please enter a message.")
    else:
        bitmap = BITMAP_TEMPLATES[template_name]
        rendered = render_bitmap(bitmap, message)

        st.subheader("Message Rendered in Bitmap:")
        st.code(rendered, language="text")  # monospace output box
